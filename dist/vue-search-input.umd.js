(function(t,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(t=typeof globalThis!="undefined"?globalThis:t||self,t.VueSearchInput=i(t.Vue))})(this,function(t){"use strict";const i=["search","text"];var g=(e,n)=>{const l=e.__vccOpts||e;for(const[a,s]of n)l[a]=s;return l};const m=(e,n,l=!0)=>{const a={};return Object.keys(e).forEach(s=>{(l?n.indexOf(s)===-1:n.indexOf(s)>=0)&&(a[s]=e[s])}),a},c=(e=!0)=>({type:Boolean,default:e}),E=t.defineComponent({inheritAttrs:!1,props:{type:{type:String,default:"search",validator:e=>i.includes(e)},modelValue:{type:String,default:""},wrapperClass:{type:String,default:"search-input-wrapper"},searchIcon:c(),shortcutIcon:c(),clearIcon:c(),clearOnEsc:c(),blurOnEsc:c(),selectOnFocus:c(),shortcutKey:{type:String,default:"/"}},emits:["update:modelValue"],setup(e,{emit:n,attrs:l}){const a=t.ref(!1),s=t.ref(null),d=t.computed(()=>m(l,["class","style"])),r=t.computed(()=>{const o=m(l,["class","style"],!1);return o.class||(o.class=e.wrapperClass),o}),h=()=>{n("update:modelValue","")},$=o=>{n("update:modelValue",o.target.value)},K=o=>{o.key==="Escape"&&(e.clearOnEsc&&h(),e.blurOnEsc&&s.value.blur())},y=o=>{if(o.key===e.shortcutKey&&o.target!==s.value&&window.document.activeElement!==s.value&&!(o.target instanceof HTMLInputElement)&&!(o.target instanceof HTMLSelectElement)&&!(o.target instanceof HTMLTextAreaElement)){o.preventDefault();const f=[].slice.call(document.querySelectorAll("[data-search-input]")).filter(p=>!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)),u=f.length>1?f[0]:s.value;u==null||u.focus(),u==null||u.select()}},w=()=>window.document.removeEventListener("keydown",y);return t.watch(()=>e.shortcutIcon,o=>{o?window.document.addEventListener("keydown",y):w()},{immediate:!0}),t.onBeforeUnmount(()=>{w()}),{inputRef:s,hasFocus:a,clear:h,onInput:$,onKeydown:K,attrsStyles:r,attrsWithoutStyles:d}}}),V=t.createElementVNode("i",{class:"search-icon search"},null,-1),S=["value"],I=t.createElementVNode("i",{class:"search-icon shortcut",title:'Press "/" to search'},null,-1);function k(e,n,l,a,s,d){return t.openBlock(),t.createElementBlock("div",t.normalizeProps(t.guardReactiveProps(e.attrsStyles)),[e.searchIcon?t.renderSlot(e.$slots,"search-icon",{key:0},()=>[V]):t.createCommentVNode("",!0),t.createElementVNode("input",t.mergeProps({ref:"inputRef",type:"search","data-search-input":"true",value:e.modelValue},e.attrsWithoutStyles,{onInput:n[0]||(n[0]=(...r)=>e.onInput&&e.onInput(...r)),onFocus:n[1]||(n[1]=r=>e.hasFocus=!0),onBlur:n[2]||(n[2]=r=>e.hasFocus=!1),onKeydown:n[3]||(n[3]=(...r)=>e.onKeydown&&e.onKeydown(...r))}),null,16,S),e.shortcutIcon&&!e.hasFocus&&e.modelValue.length===0?t.renderSlot(e.$slots,"shortcut-icon",{key:1},()=>[I]):t.createCommentVNode("",!0),e.clearIcon&&e.modelValue.length>0?t.renderSlot(e.$slots,"clear-icon",{key:2,clear:e.clear},()=>[t.createElementVNode("i",{class:"search-icon clear",onMousedown:n[4]||(n[4]=(...r)=>e.clear&&e.clear(...r))},null,32)]):t.createCommentVNode("",!0)],16)}var O=g(E,[["render",k]]);return O});
