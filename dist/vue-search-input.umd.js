(function(t,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(t=typeof globalThis<"u"?globalThis:t||self,t.VueSearchInput=d(t.Vue))})(this,function(t){"use strict";const d=["search","text","password"],p=(e,n,c=!0)=>{const l={};return Object.keys(e).forEach(s=>{(c?n.indexOf(s)===-1:n.indexOf(s)>=0)&&(l[s]=e[s])}),l},a=(e=!0)=>({type:Boolean,default:e}),S=t.defineComponent({inheritAttrs:!1,props:{type:{type:String,default:"search",validator:e=>d.includes(e)},modelValue:{type:String,default:""},wrapperClass:{type:String,default:"search-input-wrapper"},searchIcon:a(),shortcutIcon:a(),clearIcon:a(),hideShortcutIconOnBlur:a(),clearOnEsc:a(),blurOnEsc:a(),selectOnFocus:a(),shortcutListenerEnabled:a(),shortcutKey:{type:String,default:"/"}},emits:["update:modelValue"],setup(e,{emit:n,attrs:c}){const l=t.ref(!1),s=t.ref(null),i=t.computed(()=>p(c,["class","style"])),r=t.computed(()=>{const o=p(c,["class","style"],!1);return o.class||(o.class=e.wrapperClass),o}),$=t.computed(()=>!!(e.clearIcon&&e.modelValue.length>0)),k=t.computed(()=>!!(e.shortcutIcon&&!l.value&&!e.hideShortcutIconOnBlur||e.shortcutIcon&&!l.value&&e.modelValue.length===0)),m=()=>{n("update:modelValue","")},b=o=>{n("update:modelValue",o.target.value)},C=o=>{o.key==="Escape"&&(e.clearOnEsc&&m(),e.blurOnEsc&&s.value.blur())},y=o=>{if(o.key===e.shortcutKey&&o.target!==s.value&&window.document.activeElement!==s.value&&!(o.target instanceof HTMLInputElement)&&!(o.target instanceof HTMLSelectElement)&&!(o.target instanceof HTMLTextAreaElement)){o.preventDefault();const f=[].slice.call(document.querySelectorAll('[data-search-input="true"]:not([data-shortcut-enabled="false"])')).filter(h=>!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)),u=f.length>1?f[0]:s.value;u==null||u.focus(),e.selectOnFocus&&(u==null||u.select())}},w=()=>window.document.removeEventListener("keydown",y);return t.watch(()=>e.shortcutListenerEnabled,o=>{o?window.document.addEventListener("keydown",y):w()},{immediate:!0}),t.onBeforeUnmount(()=>{w()}),{inputRef:s,hasFocus:l,clear:m,onInput:b,onKeydown:C,attrsStyles:r,attrsWithoutStyles:i,showClearIcon:$,showShortcutIcon:k}}}),I=(e,n)=>{const c=e.__vccOpts||e;for(const[l,s]of n)c[l]=s;return c},E=t.createElementVNode("i",{class:"search-icon search"},null,-1),g=["type","data-shortcut-enabled","value"],V=t.createElementVNode("i",{class:"search-icon shortcut",title:'Press "/" to search'},null,-1);function O(e,n,c,l,s,i){return t.openBlock(),t.createElementBlock("div",t.normalizeProps(t.guardReactiveProps(e.attrsStyles)),[t.renderSlot(e.$slots,"prepend"),e.searchIcon?t.renderSlot(e.$slots,"search-icon",{key:0},()=>[E]):t.createCommentVNode("",!0),t.renderSlot(e.$slots,"prepend-inner"),t.createElementVNode("input",t.mergeProps({ref:"inputRef",type:e.type,"data-search-input":"true","data-shortcut-enabled":e.shortcutListenerEnabled,value:e.modelValue},e.attrsWithoutStyles,{onInput:n[0]||(n[0]=(...r)=>e.onInput&&e.onInput(...r)),onFocus:n[1]||(n[1]=r=>e.hasFocus=!0),onBlur:n[2]||(n[2]=r=>e.hasFocus=!1),onKeydown:n[3]||(n[3]=(...r)=>e.onKeydown&&e.onKeydown(...r))}),null,16,g),t.renderSlot(e.$slots,"append"),e.showShortcutIcon?t.renderSlot(e.$slots,"shortcut-icon",{key:1},()=>[V]):t.createCommentVNode("",!0),e.showClearIcon?t.renderSlot(e.$slots,"clear-icon",{key:2,clear:e.clear},()=>[t.createElementVNode("button",{class:"search-icon clear","aria-label":"Clear",onMousedown:n[4]||(n[4]=(...r)=>e.clear&&e.clear(...r)),onKeydown:n[5]||(n[5]=t.withKeys((...r)=>e.clear&&e.clear(...r),["space","enter"]))},null,32)]):t.createCommentVNode("",!0),t.renderSlot(e.$slots,"append-outer")],16)}return I(S,[["render",O]])});
